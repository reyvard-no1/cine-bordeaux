<!DOCTYPE html>
<html>
  <head>
    <title>Cin√© Bordeaux</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="bg-gray-50">
    <!-- Navbar -->
    <nav class="bg-gray-900 text-white shadow-lg">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-4">
          <!-- Logo -->
          <div class="flex items-center space-x-4">
            <%= link_to "üé¨ Cin√© Bordeaux", root_path, class: "text-2xl font-bold hover:text-yellow-400 transition" %>
          </div>

          <!-- Navigation -->
          <div class="flex items-center space-x-6">
            <%= link_to "Films Populaires", movies_path(filter: 'popular'), class: "hover:text-yellow-400 transition" %>
            <%= link_to "Prochaines Sorties", movies_path(filter: 'upcoming'), class: "hover:text-yellow-400 transition" %>
            <%= link_to "En Salle", movies_path(filter: 'now_playing'), class: "hover:text-yellow-400 transition" %>
            <%= link_to "Cin√©mas Bordeaux", cinemas_path, class: "hover:text-yellow-400 transition" %>
            <% if user_signed_in? %>
              <%= link_to "Ma Wishlist", wishlists_path, class: "bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded-lg font-semibold transition" %>
              <%= link_to "D√©connexion", destroy_user_session_path, data: { turbo_method: :delete }, class: "hover:text-yellow-400 transition" %>
            <% else %>
              <%= link_to "Connexion", new_user_session_path, class: "hover:text-yellow-400 transition" %>
              <%= link_to "Inscription", new_user_registration_path, class: "bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded-lg font-semibold transition" %>
            <% end %>
          </div>
        </div>

        <!-- Barre de recherche -->
        <div class="pb-4">
          <%= form_with url: search_movies_path, method: :get, class: "flex gap-2" do |f| %>
            <%= f.text_field :query, placeholder: "Rechercher un film...", class: "flex-1 px-4 py-2 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-yellow-500", value: params[:query] %>
            <%= f.submit "Rechercher", class: "bg-yellow-500 hover:bg-yellow-600 px-6 py-2 rounded-lg font-semibold cursor-pointer transition" %>
          <% end %>
        </div>
      </div>
    </nav>

    <!-- Flash messages -->
    <% if notice %>
      <div class="container mx-auto px-4 mt-4">
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded">
          <%= notice %>
        </div>
      </div>
    <% end %>

    <% if alert %>
      <div class="container mx-auto px-4 mt-4">
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
          <%= alert %>
        </div>
      </div>
    <% end %>

    <!-- Contenu principal -->
    <main class="container mx-auto px-4 py-8">
      <%= yield %>
    </main>
  </body>
</html>
